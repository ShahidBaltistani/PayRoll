@model VUPayRoll.ViewModel.EmployeeViewModel
@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>

    #errmsg, #Ziperrmsg, #CNoerrmsg, #Hphoneerrmsg, #Mobileerrmsg {
        color: red;
    }
</style>
<div class="content-inner compact">
    <div class="container-fluid">
        <div class="row flex-row">
            <div class="col-xl-12">
                <div class="widget has-shadow">
                    <div class="widget-header bordered no-actions d-flex align-items-center">
                        <h4>Edit</h4>
                    </div>
                    <div class="widget-body">
                        <form autocomplete="off" method="post" enctype = "multipart/form-data">
                            <input value="@Model.UserId" name="UserId" hidden />
                            @Html.AntiForgeryToken()
                            <div class="col-10">
                                <div class="section-title mt-3 mb-3">
                                    <h4>01. Personnal Informations</h4>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>First Name*</label>
                                        <input value="@Model.FirstName" placeholder="First Name" type="text" class="form-control" id="FirstName" name="FirstName" required />
                                    </div>
                                    <div class="form-group">
                                        <label>DOB*</label>
                                        <input value="@Model.DOB.GetValueOrDefault().Date.ToString("yyyy-MM-dd")" type="date" class="form-control" name="DOB" required />
                                    </div>
                                    <div class="form-group">
                                        <label>Mobile*</label>
                                        <input value="@Model.Mobile" placeholder="Mobile" type="text" class="form-control" name="Mobile" required />
                                    </div>
                                    <div class="form-group">
                                        <label>Nationality*</label>
                                        <select class="form-control selectpicker show-menu-arrow" name="NationalityId" required>
                                            <option value="" selected disabled>--Select nationality--</option>
                                            @foreach (var item in ViewBag.nationality)
                                            {
                                                if (Model.NationalityId == item.Id)
                                                {
                                                    <option value="@item.Id" selected>@item.Name</option>
                                                }
                                                else
                                                {
                                                    <option value="@item.Id">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                    

                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>Last Name*</label>
                                        <input value="@Model.LastName" placeholder="Last Name" type="text" class="form-control" id="LastName" name="LastName" required />
                                    </div>
                                    <div class="form-group">
                                        <label>Official Email</label>
                                        <input value="@Model.OfficialEmail" placeholder="Official Email" type="email" class="form-control" name="OfficialEmail"/>
                                    </div>
                                    <div class="form-group">
                                        <label>Marital Status*</label>
                                        <select class="form-control selectpicker show-menu-arrow" id="sel1" name="MaritalStatus" required>
                                            <option value="" selected disabled>--Select Marital Status--</option>
                                            @foreach (var item in ViewBag.MaritalStatus)
                                            {
                                                if (Model.MaritalStatus.ToString() == item.Name)
                                                {
                                                    <option value="@item.Id" selected>@item.Name</option>
                                                }
                                                else
                                                {
                                                    <option value="@item.Id">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Religion*</label>
                                        <select class="form-control selectpicker show-menu-arrow" id="ReligionId" name="ReligionId" required>
                                            <option value="" selected disabled>--Select Religion--</option>
                                            @foreach (var item in ViewBag.religion)
                                            {
                                                if (Model.Religions.Id == item.Id)
                                                {
                                                    <option value="@item.Id" selected>@item.Name</option>
                                                }
                                                else
                                                {
                                                    <option value="@item.Id">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                    
                                </div>
                                <div class="col-sm-4">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>CNIC*</label>
                                                <input value="@Model.CNIC" placeholder="CNIC" type="text" class="form-control" name="CNIC" id="CNIC" required />
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>Alternate Email*</label>
                                                <input value="@Model.AlternateEmail" placeholder="Alternate Email" type="email" class="form-control" name="AlternateEmail" required />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Gender*</label>
                                        <select class="form-control selectpicker show-menu-arrow" id="sel1" name="Gender" required>
                                            <option value="" selected disabled>--Select Gender--</option>
                                            @foreach (var item in ViewBag.Gender)
                                            {
                                                if (Model.Gender.ToString() == item.Name)
                                                {
                                                    <option value="@item.Id" selected>@item.Name</option>
                                                }
                                                else
                                                {
                                                    <option value="@item.Id">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Image</label>
                                        <br />
                                        <input class="custom-file" type='file' name="ProfileImage"/>

                                        @*<input type='file' onchange="encodeImageFileAsURL(this)" />
                                        <input value="@Model.ProfileImage" id="forimage" name="ProfileImage" hidden />*@
                                    </div>
                                </div>
                            </div>
                            <div class="col-10">
                                <div class="section-title mt-3 mb-3">
                                    <h4>02. Employee Address Info</h4>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>Street Address*</label>
                                        <input value="@Model.StreetAddress" placeholder="Street Address" type="text" class="form-control" id="StreetAddress" name="StreetAddress" required />
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>City*</label>
                                        <select class="form-control selectpicker show-menu-arrow" id="CityId" name="CityId" required>
                                            <option value="" selected disabled>--Select City--</option>
                                            @foreach (var item in ViewBag.city)
                                            {
                                                if (Model.Cities.Id == item.Id)
                                                {
                                                    <option value="@item.Id" selected>@item.Name</option>
                                                }
                                                else
                                                {
                                                    <option value="@item.Id">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>Country*</label>
                                        <select class="form-control selectpicker show-menu-arrow" id="sel1" name="CountryId" required>
                                            <option value="" selected disabled>--Select Country--</option>
                                            @foreach (var item in ViewBag.country)
                                            {
                                                if (Model.Cities.Country.Id == item.Id)
                                                {
                                                    <option value="@item.Id" selected>@item.Name</option>
                                                }
                                                else
                                                {
                                                    <option value="@item.Id">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-10">
                                <div class="section-title mt-3 mb-3">
                                    <h4>03. Employment Office Info</h4>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>Hire Date*</label>
                                        <input value="@Model.HireDate.GetValueOrDefault().Date.ToString("yyyy-MM-dd")" type="date" class="form-control" id="" name="HireDate" required />
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>Joining Date</label>
                                        <input value="@Model.JoiningDate.GetValueOrDefault().Date.ToString("yyyy-MM-dd")" type="date" class="form-control" id="" name="JoiningDate"/>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>Probation Period(In-Days)</label>
                                        <input value="@Model.ProbationPeriod" placeholder="In Days" type="text" class="form-control" id="Probation" name="ProbationPeriod"/>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>Skill*</label>
                                        <input value="@Model.Skill" placeholder="Speciality" type="text" class="form-control" name="Skill" required />
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>Basic Salary</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Rs</span>
                                            </div>
                                            <input value="@Model.BasicSalary" type="number" class="form-control" name="BasicSalary" id="BasicSalary" placeholder="Basic Salary">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>Designation*</label>
                                        <select class="form-control selectpicker show-menu-arrow" id="sel1" name="DesignationTypeId" required>
                                            <option value="" selected disabled>--Select Designation Type--</option>
                                            @foreach (var item in ViewBag.designation)
                                            {
                                                if (Model.DesignationTypes.Id == item.Id)
                                                {
                                                    <option value="@item.Id" selected>@item.Name</option>
                                                }
                                                else
                                                {
                                                    <option value="@item.Id">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>Shift*</label>
                                        <select class="form-control selectpicker show-menu-arrow" id="sel1" name="Shift" required>
                                            <option value="" selected disabled>--Select Shift--</option>
                                            @foreach (var item in ViewBag.Shift)
                                            {
                                                if (Model.Shift.ToString() == item.Name)
                                                {
                                                    <option value="@item.Id" selected>@item.Name</option>
                                                }
                                                else
                                                {
                                                    <option value="@item.Id">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>Department*</label>
                                        <select class="form-control selectpicker show-menu-arrow" id="department" name="Department" required>
                                            <option value="" selected disabled>--Select Designation Type--</option>
                                            @foreach (var item in ViewBag.department)
                                            {
                                                if (Model.Department.ToString() == item.Name)
                                                {
                                                    <option value="@item.Id" selected>@item.Name</option>
                                                }
                                                else
                                                {
                                                    <option value="@item.Id">@item.Name</option>
                                                }

                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>Pay Type*</label>
                                        <select class="form-control selectpicker show-menu-arrow" id="sel1" name="PayType" required>
                                            <option value="" selected disabled>--Select Pay Type--</option>
                                            @foreach (var item in ViewBag.Paytype)
                                            {
                                                if (Model.PayType.ToString() == item.Name)
                                                {
                                                    <option value="@item.Id" selected>@item.Name</option>
                                                }
                                                else
                                                {
                                                    <option value="@item.Id">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-10">
                                <div class="section-title mt-3 mb-3">
                                    <h4>04. Employee Account Info</h4>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <div class="form-group">
                                            <label>Salary Payment Method*</label>
                                            <select class="form-control selectpicker show-menu-arrow" id="payid" name="SalaryPaymentMethod" required>
                                                <option value="0" selected disabled>--Select Payment Metthode--</option>
                                                @foreach (var item in ViewBag.PaymentMethod)
                                                {
                                                    if (Model.SalaryPaymentMethod.ToString() == item.Name)
                                                    {
                                                        <option value="@item.Id" selected>@item.Name</option>
                                                    }
                                                    else
                                                    {
                                                        <option value="@item.Id">@item.Name</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4 hidefield hide">
                                    <div class="form-group">
                                        <label>Bank Name</label>
                                        <input value="@Model.BankName" placeholder="Bank Name" type="text" class="form-control hidefield" name="BankName" />
                                    </div>
                                </div>
                                <div class="col-sm-4 hidefield hide">
                                    <div class="form-group">
                                        <label>Account No</label>
                                        <input value="@Model.AccountNo" placeholder="Account No" type="text" class="form-control hidefield" name="AccountNo" />
                                    </div>
                                </div>
                            </div>

                            <div class="em-separator separator-dashed"></div>
                            <div class="text-right">
                                <a href="/Home/Employees" class="btn btn-dark">Cancel</a>
                                <input type="submit" value="Update" class="btn btn-info" />
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">

</script>
<script type="text/javascript">
    function encodeImageFileAsURL(element) {
        var file = element.files[0];
        var reader = new FileReader();
        reader.onloadend = function () {
            $('#forimage').val(reader.result);
        }
        reader.readAsDataURL(file);
    }
</script>
<script>
    var selected_option = $('#payid').val();
    if (selected_option === '0') {
                $('.hidefield').attr('pk', '1').show();
                $('.hidefield').attr('pk', '1').show();
                $('.hidefield').attr('required', true);//required hidden field on show
    }
    if (selected_option != '0') {
                $(".hidefield").removeAttr('pk').hide();
                $(".hidefield").removeAttr('pk').hide();
                $('.hidefield').attr('required', false);//un-required hidden field on show
    }   
</script>